<?xml-stylesheet href="/rss.xsl" type="text/xsl"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>潘文斌的技术文章</title><link>https://www.panwenbin.cn/</link><description>Recent content on 潘文斌的技术文章</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><copyright>copyright here</copyright><lastBuildDate>Sun, 02 Mar 2025 08:00:00 +0800</lastBuildDate><atom:link href="https://www.panwenbin.cn/index.xml" rel="self" type="application/rss+xml"/><item><title>使用mpv播放网页中的视频</title><link>https://www.panwenbin.cn/posts/mpv-play-web-video/</link><pubDate>Sun, 02 Mar 2025 08:00:00 +0800</pubDate><guid>https://www.panwenbin.cn/posts/mpv-play-web-video/</guid><description>潘文斌的技术文章 https://www.panwenbin.cn/posts/mpv-play-web-video/ -&lt;h2 id="契机">契机&lt;/h2>
&lt;p>Linux下的Chrome播放视频不支持硬件加速。虽然Firefox可以支持，但是平时还是用Chrome多一点。配置视频地址解析是可以让MPV来播放的，正好mpv还内置了调用yt-dlp来处理视频地址解析，youtube和B站都支持，那正好试一下吧。&lt;/p>
&lt;h2 id="配置">配置&lt;/h2>
&lt;p>mpv开启硬件加速。对于Intel核心显卡，配置文件&lt;code>~/.config/mpv/mpv.conf&lt;/code>中添加如下内容：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8a93a5;font-style:italic"># 启用硬件解码&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#dcaeea">hwdec&lt;/span>&lt;span style="color:#c7bf54">=&lt;/span>vaapi
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8a93a5;font-style:italic"># 指定视频输出后端（可选尝试不同组合）&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#dcaeea">vo&lt;/span>&lt;span style="color:#c7bf54">=&lt;/span>gpu
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8a93a5;font-style:italic"># 可选：针对某些场景优化&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#dcaeea">profile&lt;/span>&lt;span style="color:#c7bf54">=&lt;/span>gpu-hq
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>下载最新版本的yt-dlp，因为旧版可能已经无效。我目前下载的版本是&lt;code>2025.02.19&lt;/code>，放到了&lt;code>/usr/local/bin/&lt;/code>下。&lt;/p>
&lt;p>设置yt-dlp的配置文件&lt;code>.yt-dlp/config&lt;/code>，其实是支持多个配置地址的，我选了这个地址。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>--proxy 127.0.0.1:8118
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>--cookies-from-browser chrome
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>给mpv设置yt-dlp的相关内容，加在配置文件&lt;code>~/.config/mpv/mpv.conf&lt;/code>中&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8a93a5;font-style:italic"># 设置yt-dlp的文件位置&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>script-opts&lt;span style="color:#c7bf54">=&lt;/span>ytdl_hook-ytdl_path&lt;span style="color:#c7bf54">=&lt;/span>/usr/local/bin/yt-dlp
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8a93a5;font-style:italic"># 设置格式，我这边是Intel UHD Graphics 630，所以选择优先mp4和webm，最大1080p，编码vp9,hevc,h264,h265这些，因为av1不支持啊&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ytdl-format&lt;span style="color:#c7bf54">=&lt;/span>&lt;span style="color:#63c381">&amp;#34;(mp4,webm)bestvideo[height&amp;lt;=1080][vcodec~=&amp;#39;^(vp9|(he|a)vc|h26[45])&amp;#39;]+bestaudio/best&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8a93a5;font-style:italic"># 这边重复设置一遍代理&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ytdl-raw-options-append&lt;span style="color:#c7bf54">=&lt;/span>&lt;span style="color:#dcaeea">proxy&lt;/span>&lt;span style="color:#c7bf54">=&lt;/span>http://127.0.0.1:8118
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>播放网址的时候，把&lt;code>https://&lt;/code>协议改成&lt;code>ytdl://&lt;/code>，强制使用yt-dlp来解析视频地址。&lt;/p>
&lt;p>如果要在浏览器呼起mpv，只要给xdg-open注册&lt;code>ytdl://&lt;/code>协议，新建&lt;code>~/.local/share/applications/ytdl.desktop&lt;/code>，内容如下：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#c7bf54">[&lt;/span>Desktop Entry&lt;span style="color:#c7bf54">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#dcaeea">Name&lt;/span>&lt;span style="color:#c7bf54">=&lt;/span>Ytdl Handler
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#dcaeea">Exec&lt;/span>&lt;span style="color:#c7bf54">=&lt;/span>/usr/bin/mpv %u
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#dcaeea">Type&lt;/span>&lt;span style="color:#c7bf54">=&lt;/span>Application
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#dcaeea">MimeType&lt;/span>&lt;span style="color:#c7bf54">=&lt;/span>x-scheme-handler/ytdl;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>然后执行&lt;code>update-desktop-database ~/.local/share/applications/&lt;/code>更新数据库。&lt;/p>
&lt;p>最后只要让浏览器打开&lt;code>ytdl://&lt;/code>的链接就可以了。最简单收藏夹放一个js代码来替换。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-javascript" data-lang="javascript">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#c1abea">javascript&lt;/span>&lt;span style="color:#c7bf54">:&lt;/span>(&lt;span style="color:#c678dd">function&lt;/span>() {&lt;span style="color:#ef8383">window&lt;/span>.&lt;span style="color:#c1abea">location&lt;/span>.&lt;span style="color:#c1abea">href&lt;/span>&lt;span style="color:#c7bf54">=&lt;/span>&lt;span style="color:#ef8383">window&lt;/span>.&lt;span style="color:#c1abea">location&lt;/span>.&lt;span style="color:#c1abea">href&lt;/span>.&lt;span style="color:#c1abea">replace&lt;/span>(&lt;span style="color:#56b6c2">/^https?/&lt;/span>,&lt;span style="color:#63c381">&amp;#34;ytdl&amp;#34;&lt;/span>);})();
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>要体验更好可以写油猴脚本甚至浏览器插件。&lt;/p>- https://www.panwenbin.cn/posts/mpv-play-web-video/ - copyright here</description></item><item><title>macOS根据连接的WiFi自动切换代理</title><link>https://www.panwenbin.cn/posts/mac-autoswitch-proxy/</link><pubDate>Sun, 23 Feb 2025 08:00:00 +0800</pubDate><guid>https://www.panwenbin.cn/posts/mac-autoswitch-proxy/</guid><description>潘文斌的技术文章 https://www.panwenbin.cn/posts/mac-autoswitch-proxy/ -&lt;h2 id="问题描述">问题描述&lt;/h2>
&lt;blockquote>
&lt;p>macOS下的代理不像iOS那样设置在每个WiFi连接中的，而是不同WiFi使用同一个设置。
这在多个网络环境下需要不同的代理设置时就很不方便了。&lt;/p>&lt;/blockquote>
&lt;h2 id="搜索">搜索&lt;/h2>
&lt;h3 id="修改代理配置">修改代理配置&lt;/h3>
&lt;p>可以使用&lt;code>networksetup&lt;/code>，找到两种方式：&lt;/p>
&lt;ul>
&lt;li>使用networksetup命令，直接设置代理和开关代理；&lt;/li>
&lt;li>使用networksetup命令，修改网络位置，每个网络位置可以设置不同的代理和其他一些内容，从而达到修改代理配置的目的。&lt;/li>
&lt;/ul>
&lt;h3 id="自动触发">自动触发&lt;/h3>
&lt;p>不依赖第三方软件可以使用&lt;code>launchd&lt;/code>。&lt;/p>
&lt;h2 id="networksetup">networksetup&lt;/h2>
&lt;h3 id="设置代理">设置代理&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>networksetup -setwebproxy &lt;span style="color:#63c381">&amp;#34;Wi-Fi&amp;#34;&lt;/span> 192.168.2.2 &lt;span style="color:#d19a66">8118&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>networksetup -setsecurewebproxy &lt;span style="color:#63c381">&amp;#34;Wi-Fi&amp;#34;&lt;/span> 192.168.2.2 &lt;span style="color:#d19a66">8118&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>networksetup -setwebproxystate &lt;span style="color:#63c381">&amp;#34;Wi-Fi&amp;#34;&lt;/span> on
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>networksetup -setsecurewebproxystate &lt;span style="color:#63c381">&amp;#34;Wi-Fi&amp;#34;&lt;/span> on
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="关闭代理">关闭代理&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>networksetup -setwebproxystate &lt;span style="color:#63c381">&amp;#34;Wi-Fi&amp;#34;&lt;/span> off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>networksetup -setsecurewebproxystate &lt;span style="color:#63c381">&amp;#34;Wi-Fi&amp;#34;&lt;/span> off
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="切换网络位置">切换网络位置&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>networksetup -switchtolocation &lt;span style="color:#63c381">&amp;#34;Automatic&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>如果新建了叫做&lt;code>Home&lt;/code>的网络位置，可以使用&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>networksetup -switchtolocation &lt;span style="color:#63c381">&amp;#34;Home&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>切换到&lt;code>Home&lt;/code>网络位置。&lt;/p>
&lt;h2 id="获取wifi网络ssid">获取WiFi网络SSID&lt;/h2>
&lt;h3 id="ipconfig">ipconfig&lt;/h3>
&lt;p>对于Sequoia(15)，好几个获取SSID的方式都失效了，最后找到通过ipconfig可以。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>ipconfig getsummary &lt;span style="color:#c678dd">$(&lt;/span>networksetup -listallhardwareports | awk &lt;span style="color:#98c379">&amp;#39;/Hardware Port: Wi-Fi/{getline; print $2}&amp;#39;&lt;/span>&lt;span style="color:#c678dd">)&lt;/span> | awk -F &lt;span style="color:#98c379">&amp;#39; SSID : &amp;#39;&lt;/span> &lt;span style="color:#98c379">&amp;#39;/ SSID : / {print $2}&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="airport">airport&lt;/h3>
&lt;p>对于Monterey(12)到Sonoma(14.3.1)，可以使用&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>/System/Library/PrisvateFrameworks/Apple80211.framework/Resources/airport -I | awk -F&lt;span style="color:#98c379">&amp;#39;: &amp;#39;&lt;/span> &lt;span style="color:#98c379">&amp;#39;/ SSID: / {print $2}&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="wdutil">wdutil&lt;/h3>
&lt;p>对于Sonoma(14.4)，可以使用&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo /usr/bin/wdutil info | /usr/bin/awk &lt;span style="color:#98c379">&amp;#39;/SSID/ { print $NF }&amp;#39;&lt;/span> | head -n &lt;span style="color:#d19a66">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>缺点是需要&lt;code>sudo&lt;/code>&lt;/p>
&lt;h3 id="networksetup-1">networksetup&lt;/h3>
&lt;p>对于Monterey(12)到Sonoma(14.4)的版本，可以使用&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>networksetup -getairportnetwork en0 | /usr/bin/awk -F &lt;span style="color:#63c381">&amp;#34;: &amp;#34;&lt;/span> &lt;span style="color:#98c379">&amp;#39;{ print $2 }&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>优点是兼容版本最广泛&lt;/p>
&lt;h2 id="shell脚本">shell脚本&lt;/h2>
&lt;p>直接切换代理的完整脚本&lt;code>/usr/local/bin/proxy_switch.sh&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8a93a5;font-style:italic">#!/bin/sh
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8a93a5;font-style:italic">&lt;/span>&lt;span style="color:#dcaeea">SSID&lt;/span>&lt;span style="color:#c7bf54">=&lt;/span>&lt;span style="color:#c678dd">$(&lt;/span>/System/Library/PrivateFrameworks/Apple80211.framework/Resources/airport -I | awk -F&lt;span style="color:#98c379">&amp;#39;: &amp;#39;&lt;/span> &lt;span style="color:#98c379">&amp;#39;/ SSID: / {print $2}&amp;#39;&lt;/span>&lt;span style="color:#c678dd">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8a93a5;font-style:italic"># Wi-Fi 名称替换为实际值，例如 &amp;#34;MY-WIFI-HOME&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#c678dd">if&lt;/span> &lt;span style="color:#c7bf54">[&lt;/span> &lt;span style="color:#63c381">&amp;#34;&lt;/span>&lt;span style="color:#dcaeea">$SSID&lt;/span>&lt;span style="color:#63c381">&amp;#34;&lt;/span> &lt;span style="color:#c7bf54">=&lt;/span> &lt;span style="color:#63c381">&amp;#34;MY-WIFI-HOME&amp;#34;&lt;/span> &lt;span style="color:#c7bf54">]&lt;/span>; &lt;span style="color:#c678dd">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8a93a5;font-style:italic"># 启用代理（替换代理地址和端口）&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> networksetup -setwebproxy &lt;span style="color:#63c381">&amp;#34;Wi-Fi&amp;#34;&lt;/span> 192.168.2.2 &lt;span style="color:#d19a66">8118&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> networksetup -setsecurewebproxy &lt;span style="color:#63c381">&amp;#34;Wi-Fi&amp;#34;&lt;/span> 192.168.2.2 &lt;span style="color:#d19a66">8118&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> networksetup -setwebproxystate &lt;span style="color:#63c381">&amp;#34;Wi-Fi&amp;#34;&lt;/span> on
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> networksetup -setsecurewebproxystate &lt;span style="color:#63c381">&amp;#34;Wi-Fi&amp;#34;&lt;/span> on
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#c678dd">else&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8a93a5;font-style:italic"># 关闭代理&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> networksetup -setwebproxystate &lt;span style="color:#63c381">&amp;#34;Wi-Fi&amp;#34;&lt;/span> off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> networksetup -setsecurewebproxystate &lt;span style="color:#63c381">&amp;#34;Wi-Fi&amp;#34;&lt;/span> off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#c678dd">fi&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>记得给文件设置可执行属性，&lt;code>chmod +x /usr/local/bin/proxy_switch.sh&lt;/code>。&lt;/p>
&lt;p>假如创建了Home和Work两个网络位置，完整的脚本&lt;code>/usr/local/bin/wifi-trigger-location.sh&lt;/code>如下&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8a93a5;font-style:italic">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8a93a5;font-style:italic">&lt;/span>&lt;span style="color:#8a93a5;font-style:italic">#sleep 0.2 # 这边可以考虑加上延迟，防止获取不到SSID&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#dcaeea">current_ssid&lt;/span>&lt;span style="color:#c7bf54">=&lt;/span>&lt;span style="color:#98c379">`&lt;/span>ipconfig getsummary &lt;span style="color:#c678dd">$(&lt;/span>networksetup -listallhardwareports | awk &lt;span style="color:#98c379">&amp;#39;/Hardware Port: Wi-Fi/{getline; print $2}&amp;#39;&lt;/span>&lt;span style="color:#c678dd">)&lt;/span> | awk -F &lt;span style="color:#98c379">&amp;#39; SSID : &amp;#39;&lt;/span> &lt;span style="color:#98c379">&amp;#39;/ SSID : / {print $2}&amp;#39;&lt;/span>&lt;span style="color:#98c379">`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#dcaeea">current_location&lt;/span>&lt;span style="color:#c7bf54">=&lt;/span>&lt;span style="color:#c678dd">$(&lt;/span>networksetup -getcurrentlocation&lt;span style="color:#c678dd">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8a93a5;font-style:italic"># 根据 Wi-Fi 名称切换网络位置&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#c678dd">if&lt;/span> &lt;span style="color:#c7bf54">[[&lt;/span> &lt;span style="color:#63c381">&amp;#34;&lt;/span>&lt;span style="color:#dcaeea">$current_ssid&lt;/span>&lt;span style="color:#63c381">&amp;#34;&lt;/span> &lt;span style="color:#c7bf54">==&lt;/span> &lt;span style="color:#63c381">&amp;#34;MY-WIFI-HOME&amp;#34;&lt;/span> &lt;span style="color:#c7bf54">]]&lt;/span>; &lt;span style="color:#c678dd">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#dcaeea">new_location&lt;/span>&lt;span style="color:#c7bf54">=&lt;/span>&lt;span style="color:#63c381">&amp;#34;Home&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#c678dd">elif&lt;/span> &lt;span style="color:#c7bf54">[[&lt;/span> &lt;span style="color:#63c381">&amp;#34;&lt;/span>&lt;span style="color:#dcaeea">$current_ssid&lt;/span>&lt;span style="color:#63c381">&amp;#34;&lt;/span> &lt;span style="color:#c7bf54">==&lt;/span> &lt;span style="color:#63c381">&amp;#34;MY-WIFI-WORK&amp;#34;&lt;/span> &lt;span style="color:#c7bf54">]]&lt;/span>; &lt;span style="color:#c678dd">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#dcaeea">new_location&lt;/span>&lt;span style="color:#c7bf54">=&lt;/span>&lt;span style="color:#63c381">&amp;#34;Work&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#c678dd">else&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#dcaeea">new_location&lt;/span>&lt;span style="color:#c7bf54">=&lt;/span>&lt;span style="color:#63c381">&amp;#34;Automatic&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#c678dd">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#c678dd">if&lt;/span> &lt;span style="color:#c7bf54">[[&lt;/span> &lt;span style="color:#63c381">&amp;#34;&lt;/span>&lt;span style="color:#dcaeea">$current_location&lt;/span>&lt;span style="color:#63c381">&amp;#34;&lt;/span> !&lt;span style="color:#c7bf54">=&lt;/span> &lt;span style="color:#63c381">&amp;#34;&lt;/span>&lt;span style="color:#dcaeea">$new_location&lt;/span>&lt;span style="color:#63c381">&amp;#34;&lt;/span> &lt;span style="color:#c7bf54">]]&lt;/span>; &lt;span style="color:#c678dd">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> networksetup -switchtolocation &lt;span style="color:#63c381">&amp;#34;&lt;/span>&lt;span style="color:#dcaeea">$new_location&lt;/span>&lt;span style="color:#63c381">&amp;#34;&lt;/span> &amp;gt;&amp;gt; ~/wifitrigger.log
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ef8383">echo&lt;/span> &lt;span style="color:#63c381">&amp;#34;switching to &lt;/span>&lt;span style="color:#dcaeea">$new_location&lt;/span>&lt;span style="color:#63c381">&amp;#34;&lt;/span> &amp;gt;&amp;gt; ~/wifitrigger.log
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#c678dd">else&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ef8383">echo&lt;/span> &lt;span style="color:#63c381">&amp;#34;already &lt;/span>&lt;span style="color:#dcaeea">$new_location&lt;/span>&lt;span style="color:#63c381">&amp;#34;&lt;/span> &amp;gt;&amp;gt; ~/wifitrigger.log
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#c678dd">fi&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>记得给文件设置可执行属性，&lt;code>chmod +x /usr/local/bin/wifi-trigger-location.sh&lt;/code>。&lt;/p>
&lt;h2 id="连接wifi时触发">连接WiFi时触发&lt;/h2>
&lt;h3 id="launchd">launchd&lt;/h3>
&lt;p>macOS的launched类似于Linux的systemd，可以用来定时或条件触发执行命令。
编写一个&lt;code>~/Library/LaunchAgents/com.user.wifitrigger.plist&lt;/code>文件&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&amp;lt;?xml &lt;span style="color:#dcaeea">version&lt;/span>&lt;span style="color:#c7bf54">=&lt;/span>&lt;span style="color:#63c381">&amp;#34;1.0&amp;#34;&lt;/span> &lt;span style="color:#dcaeea">encoding&lt;/span>&lt;span style="color:#c7bf54">=&lt;/span>&lt;span style="color:#63c381">&amp;#34;UTF-8&amp;#34;&lt;/span>?&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&amp;lt;!DOCTYPE plist PUBLIC &lt;span style="color:#63c381">&amp;#34;-//Apple//DTD PLIST 1.0//EN&amp;#34;&lt;/span> &lt;span style="color:#63c381">&amp;#34;http://www.apple.com/DTDs/PropertyList-1.0.dtd&amp;#34;&lt;/span>&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&amp;lt;plist &lt;span style="color:#dcaeea">version&lt;/span>&lt;span style="color:#c7bf54">=&lt;/span>&lt;span style="color:#63c381">&amp;#34;1.0&amp;#34;&lt;/span>&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&amp;lt;dict&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;key&amp;gt;Label&amp;lt;/key&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;string&amp;gt;com.user.wifitrigger&amp;lt;/string&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;key&amp;gt;ProgramArguments&amp;lt;/key&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;array&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;string&amp;gt;/usr/local/bin/wifi-trigger-location.sh&amp;lt;/string&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;/array&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;key&amp;gt;WatchPaths&amp;lt;/key&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;array&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;!-- 监听网络配置变化 --&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;string&amp;gt;/Library/Preferences/SystemConfiguration/com.apple.wifi.message-tracer.plist&amp;lt;/string&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;/array&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;key&amp;gt;RunAtLoad&amp;lt;/key&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;true/&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&amp;lt;/dict&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&amp;lt;/plist&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>通过&lt;code>launchctl load -w ~/Library/LaunchAgents/com.user.wifitrigger.plist&lt;/code>加载配置文件。
通过&lt;code>launchctl unload ~/Library/LaunchAgents/com.user.wifitrigger.plist&lt;/code>卸载配置文件。&lt;/p>
&lt;p>此时WiFi连接时就会触发&lt;code>/usr/local/bin/wifi-trigger-location.sh&lt;/code>脚本。&lt;/p>- https://www.panwenbin.cn/posts/mac-autoswitch-proxy/ - copyright here</description></item><item><title>旧Mac安装新MacOS系统</title><link>https://www.panwenbin.cn/posts/old-mac-new-macos/</link><pubDate>Sun, 16 Feb 2025 08:00:00 +0800</pubDate><guid>https://www.panwenbin.cn/posts/old-mac-new-macos/</guid><description>潘文斌的技术文章 https://www.panwenbin.cn/posts/old-mac-new-macos/ -&lt;h2 id="现状">现状&lt;/h2>
&lt;blockquote>
&lt;p>有一台2012年中的MacBook Air (13-inch, Mid 2012)，标识为&lt;code>MacBookAir5,2&lt;/code>，型号为A1466，内存4G，硬盘128G，官方支持的最新系统为macOS Catalina（10.15），但是从macOS Monterey（12）开始逐渐增加了随航等互联互通的功能，很多软件也需要系统版本12或13才能安装了，非常希望能升到较新的系统。&lt;/p>&lt;/blockquote>
&lt;h2 id="方案">方案&lt;/h2>
&lt;blockquote>
&lt;p>通过检索，使用OpenCore Legacy Patcher工具可以安装官方不支持macOS系统。并且A1466的Intel Graphics HD 4000显卡刚好开始支持Metal，有显卡加速，流畅度较好。唯一限制较大的是只有4G内存。
系统则选择了Monterey（12），因为从Ventura（13）开始显卡加速变了，虽然OCLP v0.5.0开始有支持，但还是有一些问题的，详见&lt;a href="https://github.com/dortania/OpenCore-Legacy-Patcher/issues/1008">Legacy Metal&lt;/a>。&lt;/p>&lt;/blockquote>
&lt;h2 id="步骤">步骤&lt;/h2>
&lt;p>准备工作：一个U盘(不低于16G，如果15系统则需要大于16G)&lt;/p>
&lt;ol>
&lt;li>下载OpenCore Legacy Patcher工具，&lt;a href="https://dortania.github.io/OpenCore-Legacy-Patcher/">官方网站&lt;/a> 到Release页面下载OpenCore-Patcher-GUI.app.zip&lt;/li>
&lt;li>打开OpenCore-Patcher-GUI.app，点击&lt;code>Create macOS Installer&lt;/code>，然后选择&lt;code>Download macOS Installer&lt;/code>，接着选择版本，我这边选择&lt;code>Monterey 12&lt;/code>，下载完系统镜像会提示是否制作安装盘，此时把U盘插入，选择&lt;code>Flash Installer&lt;/code>，根据容量选择对应的U盘，会自动格式化并写入系统镜像。写完后会提示制作引导，如果错过了，也可以从软件主界面选择&lt;code>Build and Install OpenCore&lt;/code>，然后选择U盘，来制作引导。&lt;/li>
&lt;li>完成后会提示重启，此时按住&lt;code>Option&lt;/code>键，选择EFI boot，按&lt;code>Control+回车&lt;/code>选择，进入后再选择&lt;code>Install macOS&lt;/code>，之后就安装系统，安装过程中会重启几次，没问题的话最后会到登录界面或者初始化界面。&lt;/li>
&lt;li>进入新系统，此时引导还在U盘上，打开OpenCore-Patcher-GUI，选择&lt;code>Build and Install OpenCore&lt;/code>，此时选择系统硬盘，安装引导到硬盘上，然后重启，此时就可以直接从硬盘启动了。&lt;/li>
&lt;/ol>
&lt;h2 id="总结">总结&lt;/h2>
&lt;p>Monterey系统让我可以用Mac的键盘和触控板直接控制iPad2020，让两个老设备无缝配合，相当于有两个屏幕，iPad上可以运行网页或者iOS的App，Mac上可以运行工作软件。并且手不需要离开Macbook就可以操作。&lt;/p>
&lt;h2 id="其他">其他&lt;/h2>
&lt;p>虽然Sequoia的iPhone镜像功能也很好用，但是需要Apple Silicon（M系）处理器或者带T2芯片才能使用。并且我尝试安装Sequoia最后并没有成功，卡在了一个升级画面就过不去了。&lt;/p>- https://www.panwenbin.cn/posts/old-mac-new-macos/ - copyright here</description></item><item><title>KVM虚拟机空闲却占用CPU很高</title><link>https://www.panwenbin.cn/posts/kvm-high-cpu/</link><pubDate>Wed, 11 Dec 2024 08:00:00 +0800</pubDate><guid>https://www.panwenbin.cn/posts/kvm-high-cpu/</guid><description>潘文斌的技术文章 https://www.panwenbin.cn/posts/kvm-high-cpu/ -&lt;h2 id="问题描述">问题描述&lt;/h2>
&lt;blockquote>
&lt;p>一台KVM客户机系统是Windows系统，当Windows系统空闲时，从Linux看到的qemu-system-x86_64进程CPU占用率却很高。&lt;br>
这肯定是有问题的。&lt;/p>&lt;/blockquote>
&lt;h2 id="搜索">搜索&lt;/h2>
&lt;p>&lt;a href="https://codingpackets.com/blog/kvm-host-high-cpu-fix/">https://codingpackets.com/blog/kvm-host-high-cpu-fix/&lt;/a>
&lt;a href="https://www.kernel.org/doc/Documentation/virtual/kvm/halt-polling.txt">https://www.kernel.org/doc/Documentation/virtual/kvm/halt-polling.txt&lt;/a>&lt;/p>
&lt;blockquote>
&lt;p>halt-polling用于在客户机选择不再运行后再轮询一段时间，以减少客户机延时。适用于客户机程序经常需要唤醒的场景。&lt;br>
但是对于长期空闲的客户机，这种轮询会导致CPU占用率很高。&lt;/p>&lt;/blockquote>
&lt;h2 id="处理">处理&lt;/h2>
&lt;p>可以选择关闭此功能。&lt;/p>
&lt;h3 id="临时关闭">临时关闭&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>$ &lt;span style="color:#ef8383">echo&lt;/span> &lt;span style="color:#d19a66">0&lt;/span> | sudo tee /sys/module/kvm/parameters/halt_poll_ns
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="永久关闭">永久关闭&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>$ &lt;span style="color:#ef8383">echo&lt;/span> &lt;span style="color:#63c381">&amp;#34;options kvm halt_poll_ns=0&amp;#34;&lt;/span> | sudo tee -a /etc/modprobe.d/qemu-system-x86.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="后续">后续&lt;/h2>
&lt;p>Windows11客户机依然在空闲时占用单核心80%-110%的CPU。
尝试再安装一个Windows10的客户机，空闲占用单核心15%-25%的CPU。未找到原因。&lt;/p>- https://www.panwenbin.cn/posts/kvm-high-cpu/ - copyright here</description></item><item><title>Linux下RAID5增加磁盘来增加容量</title><link>https://www.panwenbin.cn/posts/raid5-add-disk/</link><pubDate>Mon, 09 Dec 2024 08:00:00 +0800</pubDate><guid>https://www.panwenbin.cn/posts/raid5-add-disk/</guid><description>潘文斌的技术文章 https://www.panwenbin.cn/posts/raid5-add-disk/ -&lt;h2 id="前情回顾">前情回顾&lt;/h2>
&lt;blockquote>
&lt;p>之前使用3块500G硬盘组了一个软RAID5，实际可用容量也就1T。现在有一块相同的硬盘闲置了，想增加进去，把容量扩到1.5T。&lt;/p>&lt;/blockquote>
&lt;h2 id="步骤">步骤&lt;/h2>
&lt;h3 id="查看挂载设备">查看挂载设备&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>$ df -h
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Filesystem Size Used Avail Use% Mounted on
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>/dev/md5 931G 93G 838G 10% /data
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>我这边的设备是&lt;code>/dev/md5&lt;/code>，挂载在&lt;code>/data&lt;/code>上。&lt;/p>
&lt;p>查看md设备的状态：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>$ cat /proc/mdstat
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Personalities : &lt;span style="color:#c7bf54">[&lt;/span>raid6&lt;span style="color:#c7bf54">]&lt;/span> &lt;span style="color:#c7bf54">[&lt;/span>raid5&lt;span style="color:#c7bf54">]&lt;/span> &lt;span style="color:#c7bf54">[&lt;/span>raid4&lt;span style="color:#c7bf54">]&lt;/span> &lt;span style="color:#c7bf54">[&lt;/span>linear&lt;span style="color:#c7bf54">]&lt;/span> &lt;span style="color:#c7bf54">[&lt;/span>multipath&lt;span style="color:#c7bf54">]&lt;/span> &lt;span style="color:#c7bf54">[&lt;/span>raid0&lt;span style="color:#c7bf54">]&lt;/span> &lt;span style="color:#c7bf54">[&lt;/span>raid1&lt;span style="color:#c7bf54">]&lt;/span> &lt;span style="color:#c7bf54">[&lt;/span>raid10&lt;span style="color:#c7bf54">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>md5 : active raid5 sdd1&lt;span style="color:#c7bf54">[&lt;/span>1&lt;span style="color:#c7bf54">]&lt;/span> sda1&lt;span style="color:#c7bf54">[&lt;/span>0&lt;span style="color:#c7bf54">]&lt;/span> sdc1&lt;span style="color:#c7bf54">[&lt;/span>3&lt;span style="color:#c7bf54">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#d19a66">976506880&lt;/span> blocks super 1.2 level 5, 512k chunk, algorithm &lt;span style="color:#d19a66">2&lt;/span> &lt;span style="color:#c7bf54">[&lt;/span>3/3&lt;span style="color:#c7bf54">]&lt;/span> &lt;span style="color:#c7bf54">[&lt;/span>UUU&lt;span style="color:#c7bf54">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> bitmap: 1/4 pages &lt;span style="color:#c7bf54">[&lt;/span>4KB&lt;span style="color:#c7bf54">]&lt;/span>, 65536KB chunk
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>unused devices: &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>[UUU]&lt;/code>确定RAID5的状态正常，也没有其他异常信息。&lt;/p>
&lt;p>查看md设备的详细信息：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo mdadm --detail /dev/md5
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="准备新磁盘">准备新磁盘&lt;/h3>
&lt;p>需要把新的磁盘处理成已经组成RAID5的磁盘的相同格式。&lt;br>
我这边之前是使用了一个分区，所以新磁盘也分一个分区。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>$ sudo fdisk /dev/sdb
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>$ sudo fdisk -l
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Disk /dev/sda: 465.76 GiB, &lt;span style="color:#d19a66">500107862016&lt;/span> bytes, &lt;span style="color:#d19a66">976773168&lt;/span> sectors
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Disk model: ***
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Units: sectors of &lt;span style="color:#d19a66">1&lt;/span> * &lt;span style="color:#dcaeea">512&lt;/span> &lt;span style="color:#c7bf54">=&lt;/span> &lt;span style="color:#d19a66">512&lt;/span> bytes
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Sector size &lt;span style="color:#c7bf54">(&lt;/span>logical/physical&lt;span style="color:#c7bf54">)&lt;/span>: &lt;span style="color:#d19a66">512&lt;/span> bytes / &lt;span style="color:#d19a66">512&lt;/span> bytes
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>I/O size &lt;span style="color:#c7bf54">(&lt;/span>minimum/optimal&lt;span style="color:#c7bf54">)&lt;/span>: &lt;span style="color:#d19a66">512&lt;/span> bytes / &lt;span style="color:#d19a66">512&lt;/span> bytes
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Disklabel type: dos
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Disk identifier: 0x********
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Device Boot Start End Sectors Size Id Type
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>/dev/sda1 &lt;span style="color:#d19a66">2048&lt;/span> &lt;span style="color:#d19a66">976773167&lt;/span> &lt;span style="color:#d19a66">976771120&lt;/span> 465.8G fd Linux raid autodetect
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Disk /dev/sdd: 465.76 GiB, &lt;span style="color:#d19a66">500107862016&lt;/span> bytes, &lt;span style="color:#d19a66">976773168&lt;/span> sectors
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Device Boot Start End Sectors Size Id Type
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>/dev/sdd1 &lt;span style="color:#d19a66">2048&lt;/span> &lt;span style="color:#d19a66">976773167&lt;/span> &lt;span style="color:#d19a66">976771120&lt;/span> 465.8G fd Linux raid autodetect
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Disk /dev/sdb: 465.76 GiB, &lt;span style="color:#d19a66">500107862016&lt;/span> bytes, &lt;span style="color:#d19a66">976773168&lt;/span> sectors
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Device Boot Start End Sectors Size Id Type
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>/dev/sdb1 &lt;span style="color:#d19a66">2048&lt;/span> &lt;span style="color:#d19a66">976773167&lt;/span> &lt;span style="color:#d19a66">976771120&lt;/span> 465.8G fd Linux raid autodetect
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Disk /dev/sdc: 465.76 GiB, &lt;span style="color:#d19a66">500107862016&lt;/span> bytes, &lt;span style="color:#d19a66">976773168&lt;/span> sectors
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Device Boot Start End Sectors Size Id Type
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>/dev/sdc1 &lt;span style="color:#d19a66">2048&lt;/span> &lt;span style="color:#d19a66">976773167&lt;/span> &lt;span style="color:#d19a66">976771120&lt;/span> 465.8G fd Linux raid autodetect
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Disk /dev/md5: 931.27 GiB, &lt;span style="color:#d19a66">999943045120&lt;/span> bytes, &lt;span style="color:#d19a66">1953013760&lt;/span> sectors
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Units: sectors of &lt;span style="color:#d19a66">1&lt;/span> * &lt;span style="color:#dcaeea">512&lt;/span> &lt;span style="color:#c7bf54">=&lt;/span> &lt;span style="color:#d19a66">512&lt;/span> bytes
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Sector size &lt;span style="color:#c7bf54">(&lt;/span>logical/physical&lt;span style="color:#c7bf54">)&lt;/span>: &lt;span style="color:#d19a66">512&lt;/span> bytes / &lt;span style="color:#d19a66">4096&lt;/span> bytes
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>I/O size &lt;span style="color:#c7bf54">(&lt;/span>minimum/optimal&lt;span style="color:#c7bf54">)&lt;/span>: &lt;span style="color:#d19a66">524288&lt;/span> bytes / &lt;span style="color:#d19a66">1048576&lt;/span> bytes
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="添加新磁盘">添加新磁盘&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo mdadm --manage /dev/md5 --add /dev/sdb1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>查看md设备的状态：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>Personalities : &lt;span style="color:#c7bf54">[&lt;/span>raid6&lt;span style="color:#c7bf54">]&lt;/span> &lt;span style="color:#c7bf54">[&lt;/span>raid5&lt;span style="color:#c7bf54">]&lt;/span> &lt;span style="color:#c7bf54">[&lt;/span>raid4&lt;span style="color:#c7bf54">]&lt;/span> &lt;span style="color:#c7bf54">[&lt;/span>linear&lt;span style="color:#c7bf54">]&lt;/span> &lt;span style="color:#c7bf54">[&lt;/span>multipath&lt;span style="color:#c7bf54">]&lt;/span> &lt;span style="color:#c7bf54">[&lt;/span>raid0&lt;span style="color:#c7bf54">]&lt;/span> &lt;span style="color:#c7bf54">[&lt;/span>raid1&lt;span style="color:#c7bf54">]&lt;/span> &lt;span style="color:#c7bf54">[&lt;/span>raid10&lt;span style="color:#c7bf54">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>md5 : active raid5 sdb1&lt;span style="color:#c7bf54">[&lt;/span>4&lt;span style="color:#c7bf54">](&lt;/span>S&lt;span style="color:#c7bf54">)&lt;/span> sdd1&lt;span style="color:#c7bf54">[&lt;/span>1&lt;span style="color:#c7bf54">]&lt;/span> sda1&lt;span style="color:#c7bf54">[&lt;/span>0&lt;span style="color:#c7bf54">]&lt;/span> sdc1&lt;span style="color:#c7bf54">[&lt;/span>3&lt;span style="color:#c7bf54">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#d19a66">976506880&lt;/span> blocks super 1.2 level 5, 512k chunk, algorithm &lt;span style="color:#d19a66">2&lt;/span> &lt;span style="color:#c7bf54">[&lt;/span>3/3&lt;span style="color:#c7bf54">]&lt;/span> &lt;span style="color:#c7bf54">[&lt;/span>UUU&lt;span style="color:#c7bf54">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> bitmap: 1/4 pages &lt;span style="color:#c7bf54">[&lt;/span>4KB&lt;span style="color:#c7bf54">]&lt;/span>, 65536KB chunk
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>unused devices: &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="扩容raid5">扩容RAID5&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo mdadm --grow /dev/md5 --raid-devices&lt;span style="color:#c7bf54">=&lt;/span>&lt;span style="color:#d19a66">4&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>这边我原先是3块硬盘，现在加了一块，所以&lt;code>--raid-devices=4&lt;/code>。
此时再看一下md设备的状态：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>$ cat /proc/mdstat
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Personalities : &lt;span style="color:#c7bf54">[&lt;/span>raid6&lt;span style="color:#c7bf54">]&lt;/span> &lt;span style="color:#c7bf54">[&lt;/span>raid5&lt;span style="color:#c7bf54">]&lt;/span> &lt;span style="color:#c7bf54">[&lt;/span>raid4&lt;span style="color:#c7bf54">]&lt;/span> &lt;span style="color:#c7bf54">[&lt;/span>linear&lt;span style="color:#c7bf54">]&lt;/span> &lt;span style="color:#c7bf54">[&lt;/span>multipath&lt;span style="color:#c7bf54">]&lt;/span> &lt;span style="color:#c7bf54">[&lt;/span>raid0&lt;span style="color:#c7bf54">]&lt;/span> &lt;span style="color:#c7bf54">[&lt;/span>raid1&lt;span style="color:#c7bf54">]&lt;/span> &lt;span style="color:#c7bf54">[&lt;/span>raid10&lt;span style="color:#c7bf54">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>md5 : active raid5 sdb1&lt;span style="color:#c7bf54">[&lt;/span>4&lt;span style="color:#c7bf54">]&lt;/span> sdd1&lt;span style="color:#c7bf54">[&lt;/span>1&lt;span style="color:#c7bf54">]&lt;/span> sda1&lt;span style="color:#c7bf54">[&lt;/span>0&lt;span style="color:#c7bf54">]&lt;/span> sdc1&lt;span style="color:#c7bf54">[&lt;/span>3&lt;span style="color:#c7bf54">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#d19a66">976506880&lt;/span> blocks super 1.2 level 5, 512k chunk, algorithm &lt;span style="color:#d19a66">2&lt;/span> &lt;span style="color:#c7bf54">[&lt;/span>4/4&lt;span style="color:#c7bf54">]&lt;/span> &lt;span style="color:#c7bf54">[&lt;/span>UUUU&lt;span style="color:#c7bf54">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#c7bf54">[&lt;/span>&amp;gt;....................&lt;span style="color:#c7bf54">]&lt;/span> &lt;span style="color:#dcaeea">reshape&lt;/span> &lt;span style="color:#c7bf54">=&lt;/span> 0.0% &lt;span style="color:#c7bf54">(&lt;/span>330684/488253440&lt;span style="color:#c7bf54">)&lt;/span> &lt;span style="color:#dcaeea">finish&lt;/span>&lt;span style="color:#c7bf54">=&lt;/span>49.1min &lt;span style="color:#dcaeea">speed&lt;/span>&lt;span style="color:#c7bf54">=&lt;/span>165342K/sec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> bitmap: 1/4 pages &lt;span style="color:#c7bf54">[&lt;/span>4KB&lt;span style="color:#c7bf54">]&lt;/span>, 65536KB chunk
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>unused devices: &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>再次查看md设备的详细信息：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>$ sudo mdadm --detail /dev/md5
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>/dev/md5:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Version : 1.2
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Creation Time : Wed Sep &lt;span style="color:#d19a66">30&lt;/span> 23:18:18 &lt;span style="color:#d19a66">2020&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Raid Level : raid5
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Array Size : &lt;span style="color:#d19a66">976506880&lt;/span> &lt;span style="color:#c7bf54">(&lt;/span>931.27 GiB 999.94 GB&lt;span style="color:#c7bf54">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Used Dev Size : &lt;span style="color:#d19a66">488253440&lt;/span> &lt;span style="color:#c7bf54">(&lt;/span>465.63 GiB 499.97 GB&lt;span style="color:#c7bf54">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Raid Devices : &lt;span style="color:#d19a66">4&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Total Devices : &lt;span style="color:#d19a66">4&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Persistence : Superblock is persistent
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Intent Bitmap : Internal
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Update Time : Wed Dec &lt;span style="color:#d19a66">4&lt;/span> 19:50:26 &lt;span style="color:#d19a66">2024&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> State : active, reshaping
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Active Devices : &lt;span style="color:#d19a66">4&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Working Devices : &lt;span style="color:#d19a66">4&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Failed Devices : &lt;span style="color:#d19a66">0&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Spare Devices : &lt;span style="color:#d19a66">0&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Layout : left-symmetric
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Chunk Size : 512K
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Consistency Policy : bitmap
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Reshape Status : 0% &lt;span style="color:#ef8383">complete&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Delta Devices : 1, &lt;span style="color:#c7bf54">(&lt;/span>3-&amp;gt;4&lt;span style="color:#c7bf54">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Name : ***
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> UUID : ***
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Events : &lt;span style="color:#d19a66">1828986&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Number Major Minor RaidDevice State
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#d19a66">0&lt;/span> &lt;span style="color:#d19a66">8&lt;/span> &lt;span style="color:#d19a66">1&lt;/span> &lt;span style="color:#d19a66">0&lt;/span> active sync /dev/sda1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#d19a66">1&lt;/span> &lt;span style="color:#d19a66">8&lt;/span> &lt;span style="color:#d19a66">49&lt;/span> &lt;span style="color:#d19a66">1&lt;/span> active sync /dev/sdd1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#d19a66">3&lt;/span> &lt;span style="color:#d19a66">8&lt;/span> &lt;span style="color:#d19a66">33&lt;/span> &lt;span style="color:#d19a66">2&lt;/span> active sync /dev/sdc1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#d19a66">4&lt;/span> &lt;span style="color:#d19a66">8&lt;/span> &lt;span style="color:#d19a66">17&lt;/span> &lt;span style="color:#d19a66">3&lt;/span> active sync /dev/sdb1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>reshape需要很长的时间，期间就慢慢等吧，尽量不要去打断它。完成后，调整整列容量&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo mdadm --grow /dev/md5 --size&lt;span style="color:#c7bf54">=&lt;/span>max
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>之后可以看到，整列容量已经变了&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>$ sudo fdisk -l /dev/md5
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Disk /dev/md5: 1.36 TiB, &lt;span style="color:#d19a66">1499914567680&lt;/span> bytes, &lt;span style="color:#d19a66">2929520640&lt;/span> sectors
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Units: sectors of &lt;span style="color:#d19a66">1&lt;/span> * &lt;span style="color:#dcaeea">512&lt;/span> &lt;span style="color:#c7bf54">=&lt;/span> &lt;span style="color:#d19a66">512&lt;/span> bytes
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Sector size &lt;span style="color:#c7bf54">(&lt;/span>logical/physical&lt;span style="color:#c7bf54">)&lt;/span>: &lt;span style="color:#d19a66">512&lt;/span> bytes / &lt;span style="color:#d19a66">4096&lt;/span> bytes
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>I/O size &lt;span style="color:#c7bf54">(&lt;/span>minimum/optimal&lt;span style="color:#c7bf54">)&lt;/span>: &lt;span style="color:#d19a66">524288&lt;/span> bytes / &lt;span style="color:#d19a66">1572864&lt;/span> bytes
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="扩容文件系统">扩容文件系统&lt;/h3>
&lt;p>到此块设备已经扩容完成，但是块设备之上的文件系统还没有扩容，所有从挂载的容量看是还没有变的。&lt;br>
需要对文件系统进行扩容，不同的文件系统用不同的命令。
如果是ext2/ext3/ext4文件系统&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo resize2fs /dev/md5
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>我这边是xfs文件系统，故使用&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo xfs_growfs /dev/md5
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>完成后重新查看挂载的文件系统大小，已经变了&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>$ df -h
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Filesystem Size Used Avail Use% Mounted on
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>/dev/md5 1.4T 114G 1.3T 9% /data
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>- https://www.panwenbin.cn/posts/raid5-add-disk/ - copyright here</description></item></channel></rss>